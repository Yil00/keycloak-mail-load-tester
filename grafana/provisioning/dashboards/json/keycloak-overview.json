{"title":"Keycloak — Vue d'ensemble","uid":"keycloak-overview","tags":["keycloak","prometheus"],"timezone":"browser","editable":true,"panels":[{"id":1,"type":"timeseries","title":"Débit (requêtes / s)","gridPos":{"h":8,"w":12,"x":0,"y":0},"datasource":{"type":"prometheus","uid":"prometheus"},"targets":[{"expr":"sum(rate(http_server_requests_seconds_count{namespace=\"keycloak\"}[1m]))","legendFormat":"Total req/s"}],"fieldConfig":{"defaults":{"unit":"reqps","min":0},"overrides":[]}},{"id":2,"type":"timeseries","title":"Latence moyenne (s)","gridPos":{"h":8,"w":12,"x":12,"y":0},"datasource":{"type":"prometheus","uid":"prometheus"},"targets":[{"expr":"sum(rate(http_server_requests_seconds_sum{namespace=\"keycloak\"}[1m])) / sum(rate(http_server_requests_seconds_count{namespace=\"keycloak\"}[1m]))","legendFormat":"Latence moyenne"}],"fieldConfig":{"defaults":{"unit":"s","min":0},"overrides":[]}},{"id":3,"type":"gauge","title":"Requêtes actives (estim.)","description":"Estimation via Little : débit × latence (fenêtre 1 min). Keycloak n'expose pas la jauge native ; cette formule approxime le nombre de requêtes en vol.","gridPos":{"h":6,"w":8,"x":0,"y":8},"datasource":{"type":"prometheus","uid":"prometheus"},"targets":[{"expr":"sum(rate(http_server_requests_seconds_sum{namespace=\"keycloak\"}[1m])) or vector(0)","legendFormat":"Actives (estim.)"}],"fieldConfig":{"defaults":{"min":0,"thresholds":{"steps":[{"color":"green","value":null},{"color":"yellow","value":50},{"color":"red","value":100}]},"decimals":1},"overrides":[]}},{"id":4,"type":"timeseries","title":"Requêtes par statut HTTP","gridPos":{"h":8,"w":24,"x":0,"y":14},"datasource":{"type":"prometheus","uid":"prometheus"},"targets":[{"expr":"sum(rate(http_server_requests_seconds_count{namespace=\"keycloak\", status=~\"2..\"}[1m]))","legendFormat":"2xx"},{"expr":"sum(rate(http_server_requests_seconds_count{namespace=\"keycloak\", status=~\"4..\"}[1m]))","legendFormat":"4xx"},{"expr":"sum(rate(http_server_requests_seconds_count{namespace=\"keycloak\", status=~\"5..\"}[1m]))","legendFormat":"5xx"}],"fieldConfig":{"defaults":{"unit":"reqps","min":0},"overrides":[]}}],"schemaVersion":38,"version":1}
